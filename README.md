# 🎯 숫자 야구 네트워크 게임

**네트워크 프로그래밍 과제 - C언어 기반 실시간 1:1 대전 게임**

## 📋 프로젝트 개요

TCP 소켓 프로그래밍을 활용한 실시간 멀티플레이어 숫자 야구 게임입니다.  
2명의 플레이어가 네트워크를 통해 접속하여 서로의 3자리 숫자를 맞추는 턴제 게임입니다.

## 🎮 게임 규칙

- **목표**: 상대방의 3자리 숫자를 먼저 맞추는 플레이어가 승리
- **숫자 조건**: 서로 다른 3자리 숫자 (예: 123, 456, 789)
- **결과 표시**: 
  - **스트라이크**: 숫자와 위치가 모두 정확
  - **볼**: 숫자는 맞지만 위치가 틀림
- **턴제**: 플레이어가 번갈아가며 추측

## 🔧 기술 스택

### **핵심 네트워크 기술**
- **TCP 소켓**: 안정적인 연결 지향 통신
- **select() I/O 멀티플렉싱**: 동시 다중 클라이언트 처리
- **JSON 프로토콜**: 구조화된 메시지 교환
- **비동기 통신**: 실시간 턴 관리 및 상태 동기화

### **개발 환경**
- **언어**: C (C99 표준)
- **라이브러리**: json-c
- **플랫폼**: macOS/Linux
- **컴파일러**: GCC

## 🏗️ 아키텍처

```
┌─────────────┐    TCP/JSON    ┌─────────────┐    TCP/JSON    ┌─────────────┐
│   Client 1  │◄──────────────►│   Server    │◄──────────────►│   Client 2  │
│ (Player 0)  │                │             │                │ (Player 1)  │
└─────────────┘                └─────────────┘                └─────────────┘
      ▲                              ▲                              ▲
      │                              │                              │
   ┌─────┐                      ┌─────────┐                      ┌─────┐
   │ UI  │                      │ Game    │                      │ UI  │
   │Logic│                      │Manager  │                      │Logic│
   └─────┘                      └─────────┘                      └─────┘
```

## 📁 파일 구조

```
NeNetGame/
├── baseball_protocol.h    # 네트워크 프로토콜 정의
├── baseball_server.c     # TCP 서버 (게임 매니저)
├── baseball_client.c     # TCP 클라이언트 (플레이어 UI)
├── Makefile             # 빌드 시스템
└── README.md           # 프로젝트 문서
```

## 🚀 설치 및 실행

### **1. 의존성 설치**
```bash
# macOS (Homebrew)
brew install json-c

# Ubuntu/Debian
sudo apt-get install libjson-c-dev

# CentOS/RHEL
sudo yum install json-c-devel
```

### **2. 컴파일**
```bash
# 의존성 확인
make check-deps

# 컴파일
make all

# 또는 개별 컴파일
make baseball_server
make baseball_client
```

### **3. 게임 실행**

**서버 시작:**
```bash
./baseball_server 8080
```

**클라이언트 접속 (2개 터미널에서):**
```bash
./baseball_client 127.0.0.1 8080
```

## 🎯 게임 플레이

### **연결 과정**
1. 서버가 포트 8080에서 대기
2. 첫 번째 플레이어 접속 → 대기 상태
3. 두 번째 플레이어 접속 → 게임 시작

### **게임 진행**
```
📋 게임 규칙:
   • 서로 다른 3자리 숫자를 설정하세요
   • 상대방의 숫자를 먼저 맞추면 승리!
   • 스트라이크: 숫자와 위치가 모두 정확
   • 볼: 숫자는 맞지만 위치가 틀림

💡 명령어:
   • set <3자리숫자>  - 내 숫자 설정 (예: set 123)
   • guess <3자리숫자> - 상대방 숫자 추측 (예: guess 456)
   • help            - 도움말 보기
   • quit            - 게임 종료
```

### **예시 게임 플로우**
```
1. set 123          # 내 숫자 설정
2. guess 456        # 상대방 숫자 추측
   → 1스트라이크 0볼
3. guess 157        # 다시 추측
   → 2스트라이크 1볼
4. guess 127        # 최종 추측
   → 3스트라이크! 승리!
```

## 🔗 네트워크 프로토콜

### **메시지 형식**
모든 메시지는 JSON 형태로 교환됩니다:

```json
{
  "action": "메시지_타입",
  "data": "추가_데이터"
}
```

### **주요 프로토콜**

| Action | 방향 | 설명 |
|--------|------|------|
| `assign_id` | S→C | 플레이어 ID 할당 |
| `game_start` | S→C | 게임 시작 알림 |
| `set_number` | C→S | 플레이어 숫자 설정 |
| `your_turn` | S→C | 턴 시작 알림 |
| `guess` | C→S | 숫자 추측 |
| `guess_result` | S→C | 추측 결과 (스트라이크/볼) |
| `game_over` | S→C | 게임 종료 및 결과 |

### **네트워크 통신 특징**

✅ **동기화된 턴 관리**: 서버가 모든 턴을 제어  
✅ **실시간 상태 공유**: 양쪽 플레이어에게 동시 업데이트  
✅ **연결 안정성**: TCP 기반 신뢰성 보장  
✅ **에러 처리**: 잘못된 입력 및 연결 해제 처리  
✅ **JSON 프로토콜**: 구조화된 메시지로 확장성 확보  

## 🧪 테스트

### **자동 테스트**
```bash
make test
```

### **수동 테스트**
```bash
# 터미널 1: 서버
make run-server

# 터미널 2: 클라이언트 1
make run-client

# 터미널 3: 클라이언트 2  
make run-client
```

## 🔧 개발자 정보

### **컴파일 옵션**
```makefile
CFLAGS = -Wall -Wextra -std=c99 -g -I/opt/homebrew/include
LIBS = -L/opt/homebrew/lib -ljson-c
```

### **디버깅**
```bash
# 디버그 모드로 실행
gdb ./baseball_server
gdb ./baseball_client

# 메모리 검사 (Linux)
valgrind ./baseball_server 8080
```

### **정리**
```bash
make clean
```

## 📊 성능 특징

- **동시 접속**: 최대 2명 (1:1 전용)
- **응답 시간**: < 10ms (로컬 네트워크)
- **메모리 사용량**: ~1MB per process
- **네트워크 대역폭**: ~1KB per turn

## 🎓 학습 포인트

이 프로젝트를 통해 다음을 학습할 수 있습니다:

### **네트워크 프로그래밍**
- TCP 소켓 프로그래밍
- select() 기반 I/O 멀티플렉싱
- 클라이언트-서버 아키텍처
- 프로토콜 설계 및 구현

### **시스템 프로그래밍**
- 프로세스 간 통신
- 비동기 이벤트 처리
- 메모리 관리
- 에러 처리

### **소프트웨어 설계**
- 모듈화된 코드 구조
- 상태 기계 설계
- 실시간 동기화
- 사용자 인터페이스

---

## 📝 라이선스

MIT License - 교육 목적으로 자유롭게 사용 가능합니다.

---

**네트워크 수업 과제용 C 기반 실시간 대전 게임** 🎯 